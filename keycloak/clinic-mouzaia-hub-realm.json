{
    "realm": "clinic-mouzaia-hub",
    "enabled": true,
    "components": {
        "org.keycloak.userprofile.UserProfileProvider": [
            {
                "providerId": "declarative-user-profile",
                "subComponents": {},
                "config": {
                    "kc.user.profile.config": [
                        "{\"attributes\":[{\"name\":\"username\",\"displayName\":\"${username}\",\"validations\":{\"length\":{\"min\":3,\"max\":255},\"username-prohibited-characters\":{},\"up-username-not-idn-homograph\":{}},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"email\",\"displayName\":\"${email}\",\"validations\":{\"email\":{},\"length\":{\"max\":255}},\"required\":{\"roles\":[\"user\"]},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"firstName\",\"displayName\":\"${firstName}\",\"validations\":{\"length\":{\"max\":255},\"person-name-prohibited-characters\":{}},\"required\":{\"roles\":[\"user\"]},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false},{\"name\":\"lastName\",\"displayName\":\"${lastName}\",\"validations\":{\"length\":{\"max\":255},\"person-name-prohibited-characters\":{}},\"required\":{\"roles\":[\"user\"]},\"permissions\":{\"view\":[\"admin\",\"user\"],\"edit\":[\"admin\",\"user\"]},\"multivalued\":false}],\"groups\":[{\"name\":\"user-metadata\",\"displayHeader\":\"User metadata\",\"displayDescription\":\"Attributes, which refer to user metadata\"}],\"unmanagedAttributePolicy\":\"ADMIN_EDIT\"}"
                    ]
                }
            }
        ]
    },
    "roles": {
        "client": {
            "identity-service": [
                {
                    "name": "read_users",
                    "description": "Allows calling /users through KrakenD Gateway",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "read_profile",
                    "description": "Allows calling /profile through KrakenD Gateway",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "get_users_from_national_id",
                    "description": "Allows querying users by national ID",
                    "composite": false,
                    "clientRole": true
                }
            ],
            "krakend-gateway": [
                {
                    "name": "api_user",
                    "description": "Allows calling protected endpoints at KrakenD",
                    "composite": false,
                    "clientRole": true
                }
            ],
            "pharmacy-service": [
                {
                    "name": "allowed_to_see_medicines",
                    "description": "Permission to list medicines via pharmacy service",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_take_medicines",
                    "description": "Staff allowed to take medicines",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_add_medicines",
                    "description": "Permission to add medicines to the pharmacy inventory",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_update_medicines",
                    "description": "Permission to update medicines in the pharmacy inventory",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_delete_medicines",
                    "description": "Permission to delete medicines from the pharmacy inventory",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_distribute_medicine",
                    "description": "Permission to distribute medicines to staff",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_see_deleted_medicines",
                    "description": "Permission to view deleted medicines",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_restore_deleted_medicines",
                    "description": "Permission to restore deleted medicines back to active",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_update_deleted_medicines",
                    "description": "Permission to update deleted medicines",
                    "composite": false,
                    "clientRole": true
                },
                {
                    "name": "allowed_to_see_distributions",
                    "description": "Permission to list distributions records",
                    "composite": false,
                    "clientRole": true
                }
            ]
        }
    },
    "users": [
        {
            "username": "service-account-identity-service",
            "enabled": true,
            "serviceAccountClientId": "identity-service",
            "realmRoles": [],
            "clientRoles": {
                "realm-management": [
                    "view-users",
                    "query-users"
                ]
            }
        },
        {
            "username": "pharmacist",
            "enabled": true,
            "emailVerified": true,
            "firstName": "Pharmacist",
            "lastName": "Pharmacist",
            "email": "pharmacist@pharmacy.com",
            "attributes": {
                "national_id": [
                    "P-0001"
                ]
            },
            "realmRoles": [],
            "clientRoles": {
                "pharmacy-service": [
                    "allowed_to_see_medicines",
                    "allowed_to_take_medicines",
                    "allowed_to_add_medicines",
                    "allowed_to_update_medicines",
                    "allowed_to_delete_medicines",
                    "allowed_to_distribute_medicine",
                    "allowed_to_see_deleted_medicines",
                    "allowed_to_restore_deleted_medicines",
                    "allowed_to_update_deleted_medicines",
                    "allowed_to_see_distributions"
                ],
                "krakend-gateway": [
                    "api_user"
                ],
                "identity-service": [
                    "read_users",
                    "get_users_from_national_id"
                ]
            },
            "credentials": [
                {
                    "type": "password",
                    "value": "DummyPassword123!",
                    "temporary": false
                }
            ]
        },
        {
            "username": "staff1",
            "enabled": true,
            "emailVerified": true,
            "firstName": "Staff",
            "lastName": "One",
            "email": "staff1@pharmacy.com",
            "attributes": {
                "national_id": [
                    "S1-0001"
                ]
            },
            "realmRoles": [],
            "clientRoles": {
                "pharmacy-service": [
                    "allowed_to_take_medicines"
                ]
            },
            "credentials": [
                {
                    "type": "password",
                    "value": "DummyPass1!",
                    "temporary": false
                }
            ]
        },
        {
            "username": "staff2",
            "enabled": true,
            "emailVerified": true,
            "firstName": "Staff",
            "lastName": "Two",
            "email": "staff2@pharmacy.com",
            "attributes": {
                "national_id": [
                    "S2-0002"
                ]
            },
            "realmRoles": [],
            "clientRoles": {},
            "credentials": [
                {
                    "type": "password",
                    "value": "DummyPass2!",
                    "temporary": false
                }
            ]
        }
    ],
    "clients": [
        {
            "clientId": "identity-service",
            "enabled": true,
            "protocol": "openid-connect",
            "publicClient": false,
            "directAccessGrantsEnabled": false,
            "standardFlowEnabled": false,
            "serviceAccountsEnabled": true,
            "bearerOnly": false,
            "secret": "${IDENTITY_SERVICE_CLIENT_SECRET}",
            "attributes": {
                "client_credentials.use_refresh_token": "false"
            },
            "redirectUris": [],
            "webOrigins": []
        },
        {
            "clientId": "krakend-gateway",
            "enabled": true,
            "protocol": "openid-connect",
            "publicClient": true,
            "directAccessGrantsEnabled": true,
            "standardFlowEnabled": true,
            "serviceAccountsEnabled": false,
            "bearerOnly": false,
            "redirectUris": [
                "http://localhost/*",
                "http://hubapi.mouzaiaclinic.local/*"
            ],
            "webOrigins": [
                "*"
            ]
        },
        {
            "clientId": "pharmacy-service",
            "enabled": true,
            "protocol": "openid-connect",
            "publicClient": true,
            "directAccessGrantsEnabled": true,
            "standardFlowEnabled": true,
            "serviceAccountsEnabled": false,
            "bearerOnly": false,
            "redirectUris": [
                "http://localhost/*",
                "http://localhost:5173/*",
                "http://hubapi.mouzaiaclinic.local/*"
            ],
            "webOrigins": [
                "http://localhost:5173",
                "*"
            ]
        }
    ]
}